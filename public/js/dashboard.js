!function(){function e(){$("#input_address_receiver_name").val(""),$("#input_address_receiver_lastname").val(""),$("#input_address_receiver_phone_day").val(""),$("#input_address_receiver_phone_night").val(""),$("#input_address_receiver_mobile").val(""),$("#input_address_receiver_address_01").val(""),$("#input_address_receiver_address_02").val(""),$("#input_address_receiver_city").val(""),$("#input_address_receiver_province").val(""),$("#input_address_receiver_postalcode").val("")}function a(){$(".alert.alert-warning.address").fadeOut(),$("#tbody_shipping_address").empty(),$.ajax({url:"/load_shippingaddress_by_user",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(e){var a=e.data;if(a)if(0==a.length)$(".alert.alert-warning.address").fadeIn();else for(var s=0;s<a.length;s++)$("#tbody_shipping_address").append("<tr><td><p>"+a[s].name+" "+a[s].lastname+"<br>"+a[s].address_01+"<br>"+a[s].address_02+"<br>"+a[s].city+"<br>"+a[s].province+"<br>"+a[s].postalcode+"<br>"+a[s].country+"</p></td><td><p>Teléfono durante el día "+a[s].phone_day+"<br>Teléfono durante la tarde-noche "+a[s].phone_night+"<br>Móvil "+a[s].mobile+'</p></td><td><p></p><p></p></td><td><a id="btn_update_shipping_address" value="'+a[s]._id+'" href="javascript:;" class="btn c-theme-btn btn-xs"><i class="fa fa-edit"></i> Modificar</a></td></tr>');else $(".alert.alert-warning.address").fadeIn()},error:function(e){alert(e.responseJSON.message)}})}function s(){$(".c-dropdown-menu").find("li").each(function(){$(this).removeClass("c-active")})}function r(){$.ajax({url:"/user/info",type:"get",contentType:"application/json",data:JSON.stringify({}),success:function(e){var a=e.data.user,s=(a.username,a.password,a.country,a.city,a.name),r=a.lastname,t=(a.address,a.address_optional,a.mail),d=a.phone;$("#lbl_user_name").text(s),$("#lbl_user_lasname").text(r),$("#lbl_user_mail").text(t),$("#lbl_user_phone").text(d)},error:function(e){alert(e.responseJSON.message)}})}$("body").on("click","#btn_add_address",function(){$(".alert.alert-success.address").fadeOut(),$(".alert.alert-warning.address").fadeOut(),$(".alert.alert-danger.address").fadeOut();var s=$("#input_address_receiver_name").val(),r=$("#input_address_receiver_lastname").val(),t=$("#input_address_receiver_phone_day").val(),d=$("#input_address_receiver_phone_night").val(),n=$("#input_address_receiver_mobile").val(),i=$("#input_address_receiver_country").val(),_=$("#input_address_receiver_address_01").val(),o=$("#input_address_receiver_address_02").val(),l=$("#input_address_receiver_city").val(),c=$("#input_address_receiver_province").val(),p=$("#input_address_receiver_postalcode").val(),u={name:s,lastname:r,phone_day:t,phone_night:d,mobile:n,country:i,address_01:_,address_02:o,city:l,province:c,postalcode:p};s&&r&&t&&i&&_&&l&&p?$.ajax({url:"/add_address",type:"post",contentType:"application/json",data:JSON.stringify(u),success:function(s){console.log(s),a(),e(),$(".alert.alert-success.address").fadeIn(),setTimeout(function(){$(".alert.alert-success.address").fadeOut(),$("#edit_add_update_address").fadeOut(),setTimeout(function(){$("#my_address").fadeIn()},400)},2e3)},error:function(e){alert(e.responseJSON.message)}}):$(".alert.alert-danger.address").fadeIn()}),$("body").on("click","#btn_update_shipping_address",function(){e();var a=$(this).attr("value");$("#my_address").fadeOut(),$.ajax({url:"/load_shippingaddress_info",type:"post",contentType:"application/json",data:JSON.stringify({shipping_address_id:a}),success:function(e){console.log(e);var a=e.data,s=a._id,r=a.address_01,t=a.address_02,d=a.city,n=a.country,i=(a.createdate,a.lastname),_=a.mobile,o=a.name,l=a.phone_day,c=a.phone_night,p=a.postalcode,u=a.province;a.user_id;$("#input_shipping_selected").val(s),$("#input_address_receiver_name").val(o),$("#input_address_receiver_lastname").val(i),$("#input_address_receiver_phone_day").val(l),$("#input_address_receiver_phone_night").val(c),$("#input_address_receiver_mobile").val(_),$("#input_address_receiver_address_01").val(r),$("#input_address_receiver_address_02").val(t),$("#input_address_receiver_city").val(d),$("#input_address_receiver_province").val(u),$("#input_address_receiver_postalcode").val(p),$('#input_address_receiver_country option[value="'+n+'"]').prop("selected",!0),setTimeout(function(){$("#edit_add_update_address").fadeIn(),$("#btn_add_address").prop("id","btn_update_address")},400)},error:function(e){alert(e.responseJSON.message)}})}),$("body").on("click","#btn_update_address",function(){var s=$("#input_shipping_selected").val(),r=$("#input_address_receiver_address_01").val(),t=$("#input_address_receiver_address_02").val(),d=$("#input_address_receiver_city").val(),n=$("#input_address_receiver_country").val(),i=$("#input_address_receiver_lastname").val(),_=$("#input_address_receiver_mobile").val(),o=$("#input_address_receiver_name").val(),l=$("#input_address_receiver_phone_day").val(),c=$("#input_address_receiver_phone_night").val(),p=$("#input_address_receiver_postalcode").val(),u=$("#input_address_receiver_province").val(),v={_id:s,name:o,lastname:i,phone_day:l,phone_night:c,mobile:_,country:n,address_01:r,address_02:t,city:d,province:u,postalcode:p};o&&i&&l&&n&&r&&d&&p?$.ajax({url:"/update_address",type:"post",contentType:"application/json",data:JSON.stringify(v),success:function(s){console.log(s),a(),e(),$(".alert.alert-success.address").fadeIn(),setTimeout(function(){$(".alert.alert-success.address").fadeOut(),$("#edit_add_update_address").fadeOut(),setTimeout(function(){$("#my_address").fadeIn()},400)},2e3)},error:function(e){alert(e.responseJSON.message)}}):$(".alert.alert-danger.address").fadeIn()}),$("body").on("click","#btn_add_new_address",function(){e(),$("#my_address").fadeOut(),$.ajax({url:"/user/info",type:"get",contentType:"application/json",data:JSON.stringify({}),success:function(e){var a=e.data.user,s=a.name,r=a.lastname;$("#input_address_receiver_name").val(s),$("#input_address_receiver_lastname").val(r),setTimeout(function(){$("#edit_add_update_address").fadeIn(),$("#btn_update_address").prop("id","btn_add_address")},400)},error:function(e){alert(e.responseJSON.message)}})}),$("body").on("click","#view_my_profile",function(){s(),$("#my_address_section").css("display","none"),$("#my_profile_section").css("display","block"),$("#edit_my_profile").css("display","none"),$("#my_profile").css("display","block"),$(this).addClass("c-active")}),$("body").on("click","#view_my_address",function(){s(),a(),$("#my_profile_section").css("display","none"),$("#my_address_section").css("display","block"),$("#edit_add_update_address").css("display","none"),$("#my_address").css("display","block"),$(this).addClass("c-active")}),$("body").on("click","#btn_update_my_profile",function(){$("#my_profile").fadeOut(),$.ajax({url:"/user/info",type:"get",contentType:"application/json",data:JSON.stringify({}),success:function(e){var a=e.data.user,s=a.username,r=(a.password,a.country),t=a.city,d=a.name,n=a.lastname,i=a.address,_=a.address_optional,o=a.mail,l=a.phone;$("#input_username").val(s),$('#input_country option[value="'+r+'"]').prop("selected",!0),$("#input_city").val(t),$("#input_name").val(d),$("#input_lastname").val(n),$("#input_address").val(i),$("#input_address_optional").val(_),$("#input_mail").val(o),$("#input_phone").val(l),setTimeout(function(){$("#edit_my_profile").fadeIn()},400)},error:function(e){alert(e.responseJSON.message)}})}),$("body").on("click","#btn_update_profile",function(){$(".alert.alert-success").fadeOut(),$(".alert.alert-warning").fadeOut(),$(".alert.alert-danger").fadeOut();var e=$("#input_username").val(),a=$("#input_country").val(),s=$("#input_city").val(),t=$("#input_name").val(),d=$("#input_lastname").val(),n=$("#input_address").val(),i=$("#input_address_optional").val(),_=$("#input_mail").val(),o=$("#input_phone").val(),l={username:e,country:a,city:s,name:t,lastname:d,address:n,address_optional:i,mail:_,phone:o};e&&a&&s&&t&&d&&n&&_&&o&&e?$.ajax({url:"/update_user_profile",type:"post",contentType:"application/json",data:JSON.stringify(l),success:function(e){r(),$(".alert.alert-success").fadeIn(),setTimeout(function(){$(".alert.alert-success").fadeOut(),$("#edit_my_profile").fadeOut(),setTimeout(function(){$("#my_profile").fadeIn()},400)},2e3)},error:function(e){$(".alert.alert-warning").fadeIn()}}):$(".alert.alert-danger").fadeIn()}),$(document).ready(function(){r()})}();